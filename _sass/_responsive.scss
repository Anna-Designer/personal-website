/**
 * Responsive Design System
 * Mobile-first approach with performance optimizations
 * @author Anna Designer
 * @version 2.0.0
 */

// =============================================================================
// MOBILE FIRST BREAKPOINTS
// =============================================================================

// Large devices (desktops, 1200px and up)
@media (max-width: $breakpoint-xl) {
  .container {
    max-width: 1100px;
  }
}

// Medium to large devices (tablets and small desktops, 1024px and down)
@media (max-width: $breakpoint-lg) {
  .hero {
    .hero-title {
      font-size: clamp($font-size-3xl, 4vw, $font-size-4xl);
    }

    .hero-subtitle {
      font-size: $font-size-lg;
    }

    .hero-content {
      grid-template-columns: 1fr;
      gap: $spacing-3xl;
      text-align: center;
    }

    .hero-text {
      text-align: center;
      order: 1;
    }

    .hero-image-container {
      order: 2;
      justify-self: center;
    }

    .hero-image-placeholder {
      width: 280px;
      height: 280px;
    }
  }

  // Grid layouts become single column
  .services-grid {
    grid-template-columns: 1fr;
    gap: $spacing-xl;
  }

  .case-study-content {
    grid-template-columns: 1fr;
    gap: $spacing-2xl;
  }

  // Process steps stack vertically
  .process-steps {
    grid-template-columns: 1fr;
    gap: $spacing-xl;
  }
}

// Small to medium devices (tablets, 768px and down)
@media (max-width: $breakpoint-md) {
  .container {
    padding: 0 $spacing-md;
  }

  // Header responsive behavior
  .site-header {
    .header-content {
      padding: $spacing-md 0;
      position: relative;
    }

    .nav-list {
      display: none;
    }

    .mobile-menu-toggle {
      display: flex;
      flex-direction: column;
      gap: 4px;
      background: none;
      border: none;
      cursor: pointer;
      padding: $spacing-sm;

      span {
        width: 25px;
        height: 3px;
        background: $text-dark;
        transition: all $transition-fast;
        transform-origin: center;
      }

      &.active {
        span:nth-child(1) {
          transform: rotate(45deg) translate(6px, 6px);
        }

        span:nth-child(2) {
          opacity: 0;
        }

        span:nth-child(3) {
          transform: rotate(-45deg) translate(6px, -6px);
        }
      }
    }
  }

  // Enhanced mobile navigation
  .main-nav.active .nav-list {
    display: flex;
    flex-direction: column;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: $bg-white;
    padding: 100px $spacing-lg $spacing-lg;
    box-shadow: none;
    z-index: $z-modal;

    // Smooth slide animation
    animation: slideInMobile $transition-normal ease-out;

    .nav-item {
      margin-bottom: $spacing-lg;
      text-align: center;

      &:last-child {
        margin-bottom: 0;
      }

      .nav-link {
        font-size: $font-size-xl;
        padding: $spacing-md 0;
        display: block;
      }
    }
  }

  // Hero section mobile optimizations
  .hero {
    padding: 80px 0 $spacing-3xl;

    .hero-title {
      font-size: clamp($font-size-2xl, 6vw, $font-size-3xl);
      line-height: 1.2;
    }

    .hero-content {
      grid-template-columns: 1fr;
      gap: $spacing-2xl;
    }

    .hero-image-placeholder {
      width: 200px;
      height: 200px;
    }

    .hero-cta {
      flex-direction: column;
      align-items: stretch;
      gap: $spacing-md;

      .btn {
        width: 100%;
        justify-content: center;
      }
    }
  }

  // Proof points mobile layout
  .proof-points {
    flex-direction: column;
    align-items: center;
    gap: $spacing-lg;
    text-align: center;
  }

  // Footer mobile optimization
  .footer-content {
    grid-template-columns: 1fr;
    text-align: center;
    gap: $spacing-xl;
  }

  // CTA buttons mobile layout
  .cta-buttons {
    flex-direction: column;
    align-items: stretch;
    gap: $spacing-md;

    .btn {
      width: 100%;
    }
  }

  // Modal mobile optimization
  .modal-overlay {
    padding: $spacing-md;
  }

  .modal {
    margin: 0;
    max-height: 95vh;

    .modal-header,
    .modal-body {
      padding: $spacing-lg;
    }
  }
}

// Small devices (phones, 640px and down)
@media (max-width: $breakpoint-sm) {
  .container {
    padding: 0 $spacing-sm;
  }

  // Even smaller spacing on mobile
  section {
    padding: $spacing-2xl 0;
  }

  // Typography adjustments for small screens
  h1 {
    font-size: clamp($font-size-xl, 5vw, $font-size-2xl);
  }

  h2 {
    font-size: clamp($font-size-lg, 4vw, $font-size-xl);
  }

  p {
    font-size: $font-size-base;
  }

  // Form improvements for small screens
  .form-control {
    padding: 14px 16px;
    font-size: 16px; // Prevents zoom on iOS
  }

  .btn {
    padding: 14px 20px;
    font-size: $font-size-base;
  }

  // Card spacing for mobile
  .card {
    .card-header,
    .card-body {
      padding: $spacing-lg;
    }
  }
}

// =============================================================================
// ANIMATION OPTIMIZATIONS
// =============================================================================

@keyframes slideInMobile {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

// =============================================================================
// PERFORMANCE OPTIMIZATIONS
// =============================================================================

// Contain layout shifts during loading
.hero,
.services {
  content-visibility: auto;
  contain-intrinsic-size: 600px;
}

// Optimize animations for performance
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

// High DPI displays optimization
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  img {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

// =============================================================================
// PRINT STYLES
// =============================================================================

@media print {
  .site-header,
  .site-footer,
  .mobile-menu-toggle,
  .btn,
  .modal-overlay {
    display: none !important;
  }

  .container {
    width: auto !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  section {
    page-break-inside: avoid;
    padding: 1rem 0 !important;
  }
}

// =============================================================================
// SMALL DEVICES (PHONES, 640PX AND DOWN)
// =============================================================================

@media (max-width: $breakpoint-sm) {
  .container {
    padding: 0 $spacing-sm;
  }

  // Even smaller spacing on mobile
  section {
    padding: $spacing-2xl 0;
  }

  // Typography adjustments for small screens
  h1 {
    font-size: clamp($font-size-xl, 5vw, $font-size-2xl);
  }

  h2 {
    font-size: clamp($font-size-lg, 4vw, $font-size-xl);
  }

  p {
    font-size: $font-size-base;
  }

  // Form improvements for small screens
  .form-control {
    padding: 14px 16px;
    font-size: 16px; // Prevents zoom on iOS
  }

  .btn {
    padding: 14px 20px;
    font-size: $font-size-base;
  }

  // Card spacing for mobile
  .card {
    .card-header,
    .card-body {
      padding: $spacing-lg;
    }
  }

}
